#!/bin/bash
#
# Perform necessary sensu removal steps
# after package is uninstalled.
#

prefix="contegix-"
install_dir="/opt/contegix/sensu"
sensu_services="sensu-client" # sensu-service sensu-server sensu-api sensu-dashboard"

#upgrade
if [ "${1}" -ge "2" ] ; then
	for service in $sensu_services; do
		service="${prefix}${service}"
		service ${service} status && service ${service} restart
	done

fi

# uninstall
if [ "${1}" -eq "0" ] ; then

	# Delete sensu user
	if getent passwd ${prefix}sensu >/dev/null; then
		userdel -f ${prefix}sensu
	fi

	# Delete sensu group
	if getent group ${prefix}sensu >/dev/null; then
		groupdel -f ${prefix}sensu
	fi

fi 

exit 0
